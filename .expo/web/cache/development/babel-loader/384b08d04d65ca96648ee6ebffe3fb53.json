{"ast":null,"code":"var _marked = _regeneratorRuntime.mark(processLogIn),\n    _marked2 = _regeneratorRuntime.mark(processSignUp),\n    _marked3 = _regeneratorRuntime.mark(apiSaga);\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { takeLatest, takeEvery, delay, put, call } from \"redux-saga/effects\";\nimport { loginUserSuccess, loginUserFailed, signUpFailed, signUpSuccess } from \"../actions/logInActions\";\nimport { fetchlogin } from \"../../api/api\";\nvar loginUrl = \"https://pl-super-kitchen-staging.herokuapp.com/api/v1/users/sessions\";\nvar signUpUrl = \"https://pl-super-kitchen-staging.herokuapp.com/api/v1/users/registrations\";\n\nfunction submitToServer(data) {\n  var response, responseJson;\n  return _regeneratorRuntime.async(function submitToServer$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(fetch(loginUrl, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Accept': 'application/json'\n            },\n            body: JSON.stringify(data)\n          }));\n\n        case 3:\n          response = _context.sent;\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(response.json());\n\n        case 6:\n          responseJson = _context.sent;\n          return _context.abrupt(\"return\", responseJson);\n\n        case 10:\n          _context.prev = 10;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(_context.t0);\n\n        case 13:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 10]], Promise);\n}\n\nfunction signUpSubmitToServer(data) {\n  var response, responseJson;\n  return _regeneratorRuntime.async(function signUpSubmitToServer$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(fetch(signUpUrl, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Accept': 'application/json'\n            },\n            body: JSON.stringify(data)\n          }));\n\n        case 3:\n          response = _context2.sent;\n          _context2.next = 6;\n          return _regeneratorRuntime.awrap(response.json());\n\n        case 6:\n          responseJson = _context2.sent;\n          return _context2.abrupt(\"return\", responseJson);\n\n        case 10:\n          _context2.prev = 10;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.error(_context2.t0);\n\n        case 13:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, [[0, 10]], Promise);\n}\n\nfunction processLogIn(action) {\n  var result;\n  return _regeneratorRuntime.wrap(function processLogIn$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return call(submitToServer, {\n            user: {\n              email: action.payload.user,\n              password: action.payload.password\n            }\n          });\n\n        case 3:\n          result = _context3.sent;\n\n          if (!result.message) {\n            _context3.next = 9;\n            break;\n          }\n\n          _context3.next = 7;\n          return put(loginUserFailed(result.message));\n\n        case 7:\n          _context3.next = 11;\n          break;\n\n        case 9:\n          _context3.next = 11;\n          return put(loginUserSuccess(result.data));\n\n        case 11:\n          _context3.next = 16;\n          break;\n\n        case 13:\n          _context3.prev = 13;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.error(_context3.t0);\n\n        case 16:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked, null, [[0, 13]]);\n}\n\nfunction processSignUp(action) {\n  var result;\n  return _regeneratorRuntime.wrap(function processSignUp$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _context4.next = 3;\n          return call(signUpSubmitToServer, {\n            user: {\n              email: action.payload.user,\n              password: action.payload.password\n            }\n          });\n\n        case 3:\n          result = _context4.sent;\n\n          if (!result.message) {\n            _context4.next = 9;\n            break;\n          }\n\n          _context4.next = 7;\n          return put(signUpFailed(result.message));\n\n        case 7:\n          _context4.next = 11;\n          break;\n\n        case 9:\n          _context4.next = 11;\n          return put(signUpSuccess(result.data));\n\n        case 11:\n          _context4.next = 16;\n          break;\n\n        case 13:\n          _context4.prev = 13;\n          _context4.t0 = _context4[\"catch\"](0);\n          console.error(_context4.t0);\n\n        case 16:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked2, null, [[0, 13]]);\n}\n\nexport default function apiSaga() {\n  return _regeneratorRuntime.wrap(function apiSaga$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return takeEvery('USER_LOGIN', processLogIn);\n\n        case 2:\n          _context5.next = 4;\n          return takeEvery('USER_SIGN_UP', processSignUp);\n\n        case 4:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked3);\n}\n;","map":{"version":3,"sources":["/home/manuel/Desktop/2021-1-Grupo4-Movil/store/Sagas/api.js"],"names":["processLogIn","processSignUp","apiSaga","takeLatest","takeEvery","delay","put","call","loginUserSuccess","loginUserFailed","signUpFailed","signUpSuccess","fetchlogin","loginUrl","signUpUrl","submitToServer","data","fetch","method","headers","body","JSON","stringify","response","json","responseJson","console","error","signUpSubmitToServer","action","user","email","payload","password","result","message"],"mappings":"uCA6CUA,Y;wCAkBAC,a;wCAmBeC,O;;;AAlFzB,SAAQC,UAAR,EAAoBC,SAApB,EAA+BC,KAA/B,EAAsCC,GAAtC,EAA2CC,IAA3C,QAAsD,oBAAtD;AACA,SAAQC,gBAAR,EAA2BC,eAA3B,EAA4CC,YAA5C,EAA0DC,aAA1D;AACA,SAAQC,UAAR;AAEA,IAAMC,QAAQ,GAAG,sEAAjB;AACA,IAAMC,SAAS,GAAG,2EAAlB;;AAGA,SAAeC,cAAf,CAA8BC,IAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAE6BC,KAAK,CAACJ,QAAD,EACtB;AACIK,YAAAA,MAAM,EAAE,MADZ;AAEIC,YAAAA,OAAO,EAAC;AACJ,8BAAgB,kBADZ;AAEJ,wBAAU;AAFN,aAFZ;AAMIC,YAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeN,IAAf;AANV,WADsB,CAFlC;;AAAA;AAEYO,UAAAA,QAFZ;AAAA;AAAA,2CAWiCA,QAAQ,CAACC,IAAT,EAXjC;;AAAA;AAWYC,UAAAA,YAXZ;AAAA,2CAYeA,YAZf;;AAAA;AAAA;AAAA;AAcQC,UAAAA,OAAO,CAACC,KAAR;;AAdR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAkBA,SAAeC,oBAAf,CAAoCZ,IAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAE6BC,KAAK,CAACH,SAAD,EACtB;AACII,YAAAA,MAAM,EAAE,MADZ;AAEIC,YAAAA,OAAO,EAAC;AACJ,8BAAgB,kBADZ;AAEJ,wBAAU;AAFN,aAFZ;AAMIC,YAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeN,IAAf;AANV,WADsB,CAFlC;;AAAA;AAEYO,UAAAA,QAFZ;AAAA;AAAA,2CAWiCA,QAAQ,CAACC,IAAT,EAXjC;;AAAA;AAWYC,UAAAA,YAXZ;AAAA,4CAYeA,YAZf;;AAAA;AAAA;AAAA;AAcQC,UAAAA,OAAO,CAACC,KAAR;;AAdR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAmBA,SAAU3B,YAAV,CAAuB6B,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEuB,iBAAMtB,IAAI,CAACQ,cAAD,EAAiB;AACtCe,YAAAA,IAAI,EAAE;AACJC,cAAAA,KAAK,EAAEF,MAAM,CAACG,OAAP,CAAeF,IADlB;AAEJG,cAAAA,QAAQ,EAAEJ,MAAM,CAACG,OAAP,CAAeC;AAFrB;AADgC,WAAjB,CAAV;;AAFvB;AAEcC,UAAAA,MAFd;;AAAA,eAQYA,MAAM,CAACC,OARnB;AAAA;AAAA;AAAA;;AAAA;AASY,iBAAM7B,GAAG,CAACG,eAAe,CAACyB,MAAM,CAACC,OAAR,CAAhB,CAAT;;AATZ;AAAA;AAAA;;AAAA;AAAA;AAWY,iBAAM7B,GAAG,CAACE,gBAAgB,CAAC0B,MAAM,CAAClB,IAAR,CAAjB,CAAT;;AAXZ;AAAA;AAAA;;AAAA;AAAA;AAAA;AAcQU,UAAAA,OAAO,CAACC,KAAR;;AAdR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAkBA,SAAU1B,aAAV,CAAwB4B,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEuB,iBAAMtB,IAAI,CAACqB,oBAAD,EAAuB;AAC5CE,YAAAA,IAAI,EAAE;AACJC,cAAAA,KAAK,EAAEF,MAAM,CAACG,OAAP,CAAeF,IADlB;AAEJG,cAAAA,QAAQ,EAAEJ,MAAM,CAACG,OAAP,CAAeC;AAFrB;AADsC,WAAvB,CAAV;;AAFvB;AAEcC,UAAAA,MAFd;;AAAA,eAQYA,MAAM,CAACC,OARnB;AAAA;AAAA;AAAA;;AAAA;AASY,iBAAM7B,GAAG,CAACI,YAAY,CAACwB,MAAM,CAACC,OAAR,CAAb,CAAT;;AATZ;AAAA;AAAA;;AAAA;AAAA;AAWY,iBAAM7B,GAAG,CAACK,aAAa,CAACuB,MAAM,CAAClB,IAAR,CAAd,CAAT;;AAXZ;AAAA;AAAA;;AAAA;AAAA;AAAA;AAcQU,UAAAA,OAAO,CAACC,KAAR;;AAdR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAmBA,eAAe,SAAUzB,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACX,iBAAME,SAAS,CAAC,YAAD,EAAeJ,YAAf,CAAf;;AADW;AAAA;AAEX,iBAAMI,SAAS,CAAC,cAAD,EAAiBH,aAAjB,CAAf;;AAFW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGd","sourcesContent":["import {takeLatest, takeEvery, delay, put, call} from \"redux-saga/effects\";\nimport {loginUserSuccess , loginUserFailed, signUpFailed, signUpSuccess} from \"../actions/logInActions\"\nimport {fetchlogin} from \"../../api/api\"\n\nconst loginUrl = \"https://pl-super-kitchen-staging.herokuapp.com/api/v1/users/sessions\";\nconst signUpUrl = \"https://pl-super-kitchen-staging.herokuapp.com/api/v1/users/registrations\";\n\n\nasync function submitToServer(data) {\n    try {\n        let response = await fetch(loginUrl,\n            {\n                method: 'POST',\n                headers:{\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json' \n                },\n                body: JSON.stringify(data)\n            })\n        let responseJson = await response.json();\n        return responseJson;\n    } catch (error) {\n        console.error(error);   \n    }  \n}\n\nasync function signUpSubmitToServer(data) {\n    try {\n        let response = await fetch(signUpUrl,\n            {\n                method: 'POST',\n                headers:{\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json' \n                },\n                body: JSON.stringify(data)\n            })\n        let responseJson = await response.json();\n        return responseJson;\n    } catch (error) {\n        console.error(error);\n    }\n    \n}\n\nfunction* processLogIn(action) {\n    try {\n        const result = yield call(submitToServer, {\n            user: {\n              email: action.payload.user,\n              password: action.payload.password\n            }\n          })\n        if (result.message) {\n            yield put(loginUserFailed(result.message))  \n        } else {\n            yield put(loginUserSuccess(result.data))   \n        }\n    } catch (error) {\n        console.error(error);\n    }\n}\n\nfunction* processSignUp(action) {\n    try {\n        const result = yield call(signUpSubmitToServer, {\n            user: {\n              email: action.payload.user,\n              password: action.payload.password\n            }\n          })\n        if (result.message) {\n            yield put(signUpFailed(result.message))  \n        } else {\n            yield put(signUpSuccess(result.data))   \n        }\n    } catch (error) {\n        console.error(error);\n    }\n}\n         \n\nexport default function *apiSaga(){\n    yield takeEvery('USER_LOGIN', processLogIn);\n    yield takeEvery('USER_SIGN_UP', processSignUp)\n};\n"]},"metadata":{},"sourceType":"module"}